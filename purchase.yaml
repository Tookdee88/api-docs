swagger: '2.0'
info:
  description: TookDee Purchasing API
  version: 1.0.0
  title: Purchasing API
  termsOfService: 'https://api.tdshop.io/'
basePath: /
tags:
  - name: Purchase Request
    description: Purchase Request Profile
schemes:
  - https
  - http
paths:
  '/purchase-requests':
    post:
      tags:
        - Purchase Request
      summary: Create Purchase Request
      operationId: createPurchaseRequest
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Purchase Request
          required: true
          schema:
            $ref: '#/definitions/PurchaseRequest'
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseRequest'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
    put:
      tags:
        - Purchase Request
      summary: Update Purchase Request Draft
      operationId: updatePurchaseRequest
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Purchase Request
          required: true
          schema:
            $ref: '#/definitions/PurchaseRequest'
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseRequest'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
    get:
      tags:
        - Purchase Request
      summary: Search Purchase Request
      operationId: findPurchaseRequestsByCriteria
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: searchCriteria
          in: query
          description: Search by PR number, Requester
          required: false
          type: string
        - name: status
          in: query
          description: Purchase Request status
          required: false
          type: string
        - name: purchaseType
          in: query
          description: Purchase Request Type
          required: false
          type: string
        - name: createdDateFrom
          in: query
          description: Filter created date from (dd/MM/yyyy)
          required: false
          type: string
        - name: createdDateTo
          in: query
          description: Filter created date To (dd/MM/yyyy)
          required: false
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseRequestPagination'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Request not found
      security:
        - oAuth2:
            - read
  '/purchase-requests/{id}':
    get:
      tags:
        - Purchase Request
      summary: Get Purchase Request By Id
      operationId: getPurchaseRequestById
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: id
          in: path
          description: Purchase Request Id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseRequest'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Request not found
      security:
        - oAuth2:
            - read
    delete:
      tags:
        - Purchase Request
      summary: Delete Purchase Request
      operationId: deletePRById
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: id
          in: path
          description: Purchase Request Id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
        '401':
          description:  >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Request not found

  '/purchase-requests/cancel':
    post:
      tags:
        - Purchase Request
      summary: Cancel Purchase Request
      operationId: cancelPurchaeRequest
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Cancel Reason
          required: true
          schema:
            $ref: '#/definitions/CancelReason'
      responses:
        '200':
          description: successful operation
        '401':
          description:  >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Request not found
  '/purchase-requests/submit':
    post:
      tags:
        - Purchase Request
      summary: Submit Purchase Request
      operationId: submitPurchaseRequest
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Purchase Request
          required: true
          schema:
            $ref: '#/definitions/PurchaseRequest'
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseRequest'
        '400':
          description: >
            Validation failure error codes


            > 08009 - Invalid order schedule

            > 08010 - There is an error or change in PR item

            > 08011 - PR item not allow to buy

            > 08012 - PR item invalid article number

            > 08013 - PR item invalid supplier

            > 08014 - PR item invalid unit price

            > 08015 - PR item invalid barcode

            > 08016 - PR item unit price not in cost range

            > 08017 - PR item invalid quantity

          schema:
            $ref: '#/definitions/PurchaseRequestValidationResult'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/purchase-requests/approve':
    post:
      tags:
        - Purchase Request
      summary: Approve Purchase Request
      operationId: approvePurchaseRequest
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name:  x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Approve Purchase Request
          required: true
          schema:
            $ref: '#/definitions/ApprovePurchaseRequest'
      responses:
        '200':
          description: successful operation
        '401':
          description:  >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Request not found

  '/purchase-requests/reject':
    post:
      tags:
        - Purchase Request
      summary: Reject Purchase Request
      operationId: rejectPurchaseRequest
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name:  x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Reject Purchase Request
          required: true
          schema:
            $ref: '#/definitions/CancelReason'
      responses:
        '200':
          description: successful operation
        '401':
          description:  >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Request not found
  '/purchase-product-prices':
    get:
      tags:
        - Purchase Product Price
      summary: Find Purchase Product Prices
      operationId: findPurchaseProductPrices
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: searchCriteria
          in: query
          description: Search by productName, articleNo, barcode, supplierCode, supplierName
          required: false
          type: string
        - name: purchaseType
          in: query
          description: Purchase Type
          required: false
          type: string
        - name: articleType
          in: query
          description: Article Type "M" or "N"
          required: false
          type: string
        - name: orderingCycle
          in: query
          description: Ordering cycle
          required: false
          type: integer
        - name: pageNo
          in: query
          description: Page Number
          required: false
          type: integer
        - name: pageSize
          in: query
          description: Page Size
          required: false
          type: integer
        - name: sortDirection
          in: query
          description: Sort Direction
          required: false
          type: string
        - name: sortBy
          in: query
          description: Sort By
          required: false
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseProductPricePagination'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error

            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - read
  '/purchase-orders':
    get:
      tags:
        - Purchase Order
      summary: Search Purchase Oreder
      operationId: findPurchaseOrderByCriteria
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: searchCriteria
          in: query
          description: Search by PO number, PR number, Supplier name, Requester
          required: false
          type: string
        - name: status
          in: query
          description: Purchase Order status
          required: false
          type: string
        - name: purchasrType
          in: query
          description: Purchase Type
          required: false
          type: string
        - name: createdDateFrom
          in: query
          description: Filter created date from (dd/MM/yyyy)
          required: false
          type: string
        - name: createdDateTo
          in: query
          description: Filter created date to (dd/MM/yyyy)
          required: false
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseOrderPagination'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Order not found
      security:
        - oAuth2:
            - read
  '/purchase-orders/{id}':
    get:
      tags:
        - Purchase Order
      summary: Get Purchase Order by id
      operationId: getPurchaseOrderById
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: id
          in: path
          description: Purchase Order id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseOrder'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Order not found
      security:
        - oAuth2:
            - read
  '/purchase-orders/cancel':
    post:
      tags:
        - Purchase Order
      summary: Cancel Purchase Order
      operationId: cancelPurchaseOrder
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Goods Receive Object
          required: true
          schema:
            $ref: '#/definitions/CancelReason'
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseOrder'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Order not found
      security:
        - oAuth2:
            - write
  '/purchase-orders/close':
    post:
      tags:
        - Purchase Order
      summary: Manual Close Purchase Order
      operationId: closePurchaseOrder
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Goods Receive Object
          required: true
          schema:
            $ref: '#/definitions/CancelReason'
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/PurchaseOrder'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Order not found
      security:
        - oAuth2:
            - write
  '/goods-receives':
    get:
      tags:
        - Goods Receive
      summary: Search Goods Receive
      operationId: findGoodsReceiveByCriteria
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: searchCriteria
          in: query
          description: Search by GR number, PO number, Supplier name, Receive
          required: false
          type: string
        - name: status
          in: query
          description: Good Receive status
          required: false
          type: string
        - name: purchasrType
          in: query
          description: Purchase Type
          required: false
          type: string
        - name: createdDateFrom
          in: query
          description: Filter created date from (dd/MM/yyyy)
          required: false
          type: string
        - name: createdDateTo
          in: query
          description: Filter created date to (dd/MM/yyyy)
          required: false
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/GoodsReceivePagination'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Order not found
      security:
        - oAuth2:
            - read
    post:
      tags:
        - Goods Receive
      summary: Submit Good Receive
      operationId: submitGoodsReceive
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Goods Receive Object
          required: true
          schema:
            $ref: '#/definitions/GoodsReceiveDto'
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/GoodsReceiveDto'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Order not found
      security:
        - oAuth2:
            - write
  '/goods-receives/{poNo}':
    get:
      tags:
        - Goods Receive
      summary: Get Goods Receive
      operationId: getGoodsReceiveFromPo
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: poNo
          in: path
          description: Purchase Order number
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/GoodsReceiveDto'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Purchase Order not found
      security:
        - oAuth2:
            - read
  '/goods-receives/view/{id}':
    get:
      tags:
        - Goods Receive
      summary: Get Goods Receive By Id
      operationId: findGoodsReceiveById
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: id
          in: path
          description: Goods Receive Id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/GoodsReceiveDto'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Goods Receive not found
      security:
        - oAuth2:
            - read
  '/goods-receives/cancel':
    post:
      tags:
        - Goods Receive
      summary: Cancel Goods Receive
      operationId: cancelGoodsReceive
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "purchase.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Cancel Reason
          required: true
          schema:
            $ref: '#/definitions/CancelReason'
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/GoodsReceiveDto'
        '401':
          description: >
            Not authorized, refer to www-authenticate header to describe an
            error
            Example: Bearer error="invalid_token", error_description="Jwt
            expired at 2019-02-12T12:00:04Z",
            error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Goods Receive not found
      security:
        - oAuth2:
            - read

securityDefinitions:
  oAuth2:
    type: oauth2
    flow: accessCode
    authorizationUrl: 'https://api.tdshop.io'
    tokenUrl: 'https://api.tdshop.io/auth/token'
    scopes:
      read: Grants read access
      write: Grants write access
definitions:
  PurchaseRequest:
    type: object
    description: Purchase Request
    properties:
      id:
        type: string
      docNo:
        type: string
      docDate:
        type: string
      orderDate:
        type: string
      type:
        $ref: '#/definitions/PurchaseType'
      status:
        $ref: '#/definitions/PurchaseRequestStatus'
      articleType:
        $ref: '#/definitions/ArticleType'
      orderSchedule:
        $ref: '#/definitions/DayOfWeek'
      orderScheduleDate:
        type: string
      items:
        type: array
        items:
          $ref: '#/definitions/PurchaseRequestItem'
      subTotalAmount:
        type: number
        format: double
      vatAmount:
        type: number
        format: double
      totalAmount:
        type: number
        format: double
      version:
        type: number
      createdBy:
        type: string
      createdByName:
        type: string
      lastModifiedBy:
        type: string
      lastModifiedByName:
        type: string
      createdDate:
        type: string
      lastModifiedDate:
        type: string
  PurchaseRequestItem:
    type: object
    description: Purchase Request Item
    properties:
      itemNo:
        type: number
      articleNo:
        type: string
      barcode:
        type: string
      productName:
        type: string
      orderUnit:
        type: string
      minimumOrder:
        type: number
        format: double
      quantity:
        type: number
        format: double
      unitPrice:
        type: number
        format: double
      vatAmount:
        type: number
        format: double
      amount:
        type: number
        format: double
      supplierCode:
        type: string
      supplierName:
        type: string
      deliveryDetail:
        $ref: '#/definitions/DeliveryDetail'
      status:
        $ref: '#/definitions/PurchaseRequestItemStatus'
  DeliveryDetail:
    type: object
    properties:
      requestDeliveryDate:
        type: string
      deliveryNote:
        type: string
      shipTo:
        $ref: '#/definitions/Contact'
      billTo:
        $ref: '#/definitions/Contact'
  Contact:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      address:
        type: string
      contactPersonName:
        type: string
      contactPersonNumber:
        type: string
  PurchaseRequestPagination:
    type: object
    description: Pagination of Purchase Request
    allOf:
      - $ref: '#/definitions/Pagination'
      - type: object
        properties:
          content:
            type: array
            items:
              $ref: '#/definitions/PurchaseRequestListItem'
  Pagination:
    type: object
    description: Object with paging
    properties:
      page:
        type: integer
      size:
        type: integer
      totalElements:
        type: integer
      first:
        type: boolean
      numberOfElements:
        type: integer
      totalPages:
        type: integer
      hasContent:
        type: boolean
      last:
        type: boolean
      empty:
        type: boolean
  PurchaseRequestListItem:
    type: object
    description: Purchase Request List Item
    properties:
      id:
        type: string
      docNo:
        type: string
      type:
        $ref: '#/definitions/PurchaseType'
      totalAmount:
        type: number
      requester:
        type: string
      requestedDate:
        type: string
      status:
        $ref: '#/definitions/PurchaseRequestStatus'
      articleType:
        $ref: '#/definitions/ArticleType'
      advance:
        type: boolean
      orderSchedule:
        $ref: '#/definitions/DayOfWeek'
      auditLogs:
        type: array
        items:
          $ref: '#/definitions/AuditLog'
  CancelReason:
    type: object
    description: Cancel reason
    properties:
      id:
        type: string
      reason:
        type: string
  PurchaseRequestItemValidationError:
    type: object
    properties:
      field:
        type: string
      code:
        type: string
      message:
        type: string
  PurchaseRequestItemChange:
    type: object
    properties:
      field:
        type: string
      before:
        type: object
      after:
        type: object
  PurchaseRequestItemValidationResult:
    type: object
    properties:
      itemNo:
        type: integer
      changes:
        type: array
        items:
          $ref: '#/definitions/PurchaseRequestItemChange'
      errors:
        type: array
        items:
          $ref: '#/definitions/PurchaseRequestItemValidationError'
  PurchaseRequestValidationResult:
    type: object
    description: Submit Purchase Request Error Response
    properties:
      code:
        type: string
      message:
        type: string
      items:
        type: array
        items:
          $ref: '#/definitions/PurchaseRequestItemValidationResult'
  ApprovePurchaseRequest:
    type: object
    description: Approve Purchase Request
    properties:
      id:
        type: string
      comment:
        type: string
      approvedPrItem:
        type: array
        items:
          type: string
      subTotalAmount:
        type: number
      varAmount:
        type: number
      totalAmount:
        type: number
  PurchaseProductPricePagination:
    type: object
    description: Pagination of Purchase Product Price
    allOf:
      - $ref: '#/definitions/Pagination'
      - type: object
        properties:
          content:
            type: array
            items:
              $ref: '#/definitions/PurchaseProductPrice'
  PurchaseProductPrice:
    type: object
    description: Purchase Product Price
    properties:
      articleNo:
        type: string
      barcode:
        type: string
      productName:
        type: string
      productStatus:
        type: string
      supplierCode:
        type: string
      supplierName:
        type: string
      orderUnit:
        type: string
      orderBaseUnitFactor:
        type: integer
      pickingUnitFactor:
        type: integer
      minimumOrder:
        type: number
        format: double
      unitPrice:
        type: number
        format: double
      vatAmount:
        type: number
        format: double
      vatPct:
        type: number
        format: double
  PurchaseOrderPagination:
    type: object
    description: Pagination of Purchase Request
    allOf:
      - $ref: '#/definitions/Pagination'
      - type: object
        properties:
          content:
            type: array
            items:
              $ref: '#/definitions/PurchaseOrderListItem'
  PurchaseOrderListItem:
    type: object
    description: Purchase Order List Item
    properties:
      id:
        type: string
      docNo:
        type: string
      prNos:
        type: array
        items:
          type: string
      type:
        $ref: '#/definitions/PurchaseType'
      total:
        type: number
        format: double
      supplierName:
        type: string
      requesterName:
        type: string
      createdDate:
        type: string
      status:
        $ref: '#/definitions/PurchaseOrderStatus'
      orderSchedule:
        $ref: '#/definitions/DayOfWeek'
  PurchaseOrder:
    type: object
    description: Purchase Order
    properties:
      id:
        type: string
      docNo:
        type: string
      prNos:
        type: array
        items:
          type: string
      status:
        $ref: '#/definitions/PurchaseOrderStatus'
      supplierName:
        type: string
      type:
        $ref: '#/definitions/PurchaseType'
      requester:
        type: string
      createdDate:
        type: string
      subTotalAmount:
        type: number
        format: double
      vatAmount:
        type: number
        format: double
      totalAmount:
        type: number
        format: double
      items:
        type: array
        items:
          $ref: '#/definitions/PurchaseOrderItem'
      auditLogs:
        type: array
        items:
          $ref: '#/definitions/AuditLog'
  PurchaseOrderItem:
    type: object
    description: Purchase Order Item
    properties:
      itemNo:
        type: number
      articleNo:
        type: string
      productName:
        type: string
      barcode:
        type: string
      orderUnit:
        type: string
      quantity:
        type: number
      remainingQuantity:
        type: number
      receiveQuantity:
        type: number
      unitPrice:
        type: number
        format: double
      vatAmount:
        type: number
        format: double
      amount:
        type: number
        format: double
      status:
        $ref: '#/definitions/PurchaseOrderItemStatus'
      remark:
        type: string
  GoodsReceivePagination:
    type: object
    description: Pagination of Purchase Request
    allOf:
      - $ref: '#/definitions/Pagination'
      - type: object
        properties:
          content:
            type: array
            items:
              $ref: '#/definitions/GoodsReceiveListItem'
  GoodsReceiveListItem:
    type: object
    description: Good Receive List Item
    properties:
      id:
        type: string
      docNo:
        type: string
      poRefNo:
        type: string
      type:
        $ref: '#/definitions/PurchaseType'
      total:
        type: number
        format: double
      supplierName:
        type: string
      receiver:
        type: string
      createdDate:
        type: string
      status:
        $ref: '#/definitions/GoodsReceiveStatus'
      orderSchedule:
        $ref: '#/definitions/DayOfWeek'
  GoodsReceiveDto:
    type: object
    description: Goods Receieve object
    properties:
      id:
        type: string
      docNo:
        type: string
      poNo:
        type: string
      doNo:
        type: string
      invoiceNo:
        type: string
      supplierCode:
        type: string
      supplierName:
        type: string
      receiver:
        type: string
      createdDate:
        type: string
      status:
        $ref: '#/definitions/GoodsReceiveStatus'
      subTotalAmount:
        type: number
        format: double
      vatAmount:
        type: number
        format: double
      totalAmount:
        type: number
        format: double
      'items':
        type: array
        items:
          $ref: '#/definitions/GoodsReceiveItemDto'
  GoodsReceiveItemDto:
    type: object
    description: Goods Receive Item Object
    properties:
      itemNo:
        type: number
        format: integer
      articleNo:
        type: string
      barcode:
        type: string
      productName:
        type: string
      orderUnit:
        type: string
      orderQuantity:
        type: number
        format: double
      unitPrice:
        type: number
        format: double
      remainingQuantity:
        type: number
        format: double
      receiveQuantity:
        type: number
        format: double
      vatPct:
        type: number
        format: double
      vatAmount:
        type: number
        format: double
      receiveAmount:
        type: number
        format: double
      freeItems:
        type: array
        items:
          $ref: '#/definitions/GoodsReceiveFreeItemDto'
  GoodsReceiveFreeItemDto:
    type: object
    description: Goods Receive Free Item Object
    properties:
      refArticleNo:
        type: string
      articleNo:
        type: string
      barcode:
        type: string
      productName:
        type: string
      orderUnit:
        type: string
      orderQuantity:
        type: number
        format: double
      remainingQuantity:
        type: number
        format: double
      receiveQuantity:
        type: number
        format: double
  AuditLog:
    type: object
    description: Audit log for purchase object
    properties:
      activities:
        type: array
        items:
          $ref: '#/definitions/Activity'
      editDate:
        type: string
      editBy:
        type: string
      editByName:
        type: string
  Activity:
    type: object
    description: Activity with audit log
    properties:
      activity:
        type: string
      descriptions:
        type: array
        items:
          type: string
  ArticleType:
    type: string
    description: M - Merchandise, N - Non Merchandise
    enum:
      - M
      - N
  PurchaseType:
    type: string
    enum:
      - Z9
      - Z9_EDIT
      - WAREHOUSE
      - HOTPRICE
      - SUPPLIER
  PurchaseRequestStatus:
    type: string
    enum:
      - DRAFT
      - AWAITING_APPROVAL
      - AWAITING_ERP
      - COMPLETED
      - REJECTED
      - CANCELLED
  PurchaseRequestItemStatus:
    type: string
    enum:
      - APPROVED
      - SUBMITTED
      - CONFIRMED
      - REJECTED
      - CANCELLED
      - CJ_CONFIRMED
      - CJ_APPROVED
      - CJ_ISSUED
      - CJ_RECEIVED
      - CJ_COMPLETED
      - CJ_DELETED
  PurchaseOrderStatus:
    type: string
    enum:
      - AWAITING_SEND_PO
      - AWAITING_SUPPLIER_RESPONSE
      - AWAITING_GR
      - GR_COMPLETED
      - CANCELLED
      - CLOSED
  PurchaseOrderItemStatus:
    type: string
    enum:
      - APPROVED
      - AWAITING_RESPONSE
      - CONFIRMED
      - REJECTED
      - CANCELLED_BY_CJ
      - CANCELLED_BY_TD
      - CANCELLED_BY_USER
      - RECEIVED
      - COMPLETED
  GoodsReceiveStatus:
    type: string
    enum:
      - RECEIVED
      - COMPLETED
      - CANCELLED
  DayOfWeek:
    type: number
    description: 1 Monday ... 7 Sunday
    enum:
      - 1
      - 2
      - 3
      - 4
      - 5
      - 6
      - 7