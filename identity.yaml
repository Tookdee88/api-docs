swagger: '2.0'
info:
  description: This is the identity API
  version: 1.0.0
  title: Identity API
  termsOfService: 'https://api.tdshop.io/'
basePath: /
tags:
  - name: Authorization
    description: OAuth2 authorization
  - name: User Profile
    description: User profile
  - name: Role Profile
    description: Role profile
  - name: Application Profile
    description: Applicaiton profile
schemes:
  - https
  - http
paths:
  /oauth/token:
    post:
      tags:
        - Authorization
      summary: Get request access token
      operationId: getAccessToken
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: User password grant type payload
          required: true
          schema:
            $ref: '#/definitions/UserCredential'
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/OAuthToken'
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2: []
  '/users/{userId}':
    get:
      tags:
        - User Profile
      summary: Get user profile
      operationId: findUserByUserId
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userId
          in: path
          description: User id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/User'
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - read
  '/users  ':
    get:
      tags:
        - User Profile
      summary: Get user list by cretiria
      operationId: findUserByMerchant
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: merchantId
          in: path
          description: Merchant Id
          required: true
          type: string
        - name: page
          in: path
          description: Page number
          required: true
          type: integer
        - name: size
          in: path
          description: number record per one page
          required: true
          type: integer   
        - name: sortBy
          in: path
          description: field name for sorting
          required: true
          type: string
        - name: sortOrder
          in: path
          description: sorting direction ('desc','asc')
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
             $ref: '#/definitions/UserListPagination'
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - read
  '/users/fetchData':
    get:
      tags:
        - User Profile
      summary: Fetch User
      operationId: fetchUsers
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: merchantId
          in: query
          description: Merchant Id
          required: false
          type: string
        - name: storeId
          in: query
          description: Store Id
          required: false
          type: string
        - name: resumeAt
          in: query
          description: Resume at
          required: false
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            type: array
            items:
               $ref: '#/definitions/UserList'
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: page not found
      security:
        - oAuth2:
            - read
  '/users':
    post:
      tags:
        - User Profile
      summary: Create new user profile
      operationId: createUser
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: New user payload
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - write  
  '/users ':
    put:
      tags:
        - User Profile
      summary: Update user profile
      operationId: updateUser
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Update user payload
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - write
  '/users/{userName} ':
    delete:
      tags:
        - User Profile
      summary: Delete user profile
      operationId: deleteUser
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userId
          in: path
          description: User id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - write
  '/users/{userName}/changePassword':
    post:
      tags:
        - User Profile
      summary: Change user password
      operationId: changePassword
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: body
          in: body
          description: Change password payload
          required: true
          schema:
            $ref: '#/definitions/ChangePassword'
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid password policy
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - write
  '/users/{userName}/changePinCode':
    post:
      tags:
        - User Profile
      summary: Change user pincode
      operationId: changePinCode
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: body
          in: body
          description: Change pincode payload
          required: true
          schema:
            $ref: '#/definitions/ChangePincode'
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid pincode policy
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - write
  '/users/{userName}/forceChangePassword':
    post:
      tags:
        - User Profile
      summary: Force change user password
      operationId: forceChangePassword
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: body
          in: body
          description: Force change password payload
          required: true
          schema:
            $ref: '#/definitions/ForceChangePassword'
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid password policy
        '401':
          description: |
            Not authorized, refer to www-authenticate header to describe an error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - write
  '/users/{userName}/forceChangePinCode':
    post:
      tags:
        - User Profile
      summary: Force change user pincode
      operationId: forceChangePinCode
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: body
          in: body
          description: Force change pincode payload
          required: true
          schema:
            $ref: '#/definitions/ForceChangePincode'
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid pincode policy
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - write
  '/users/{userName}/otp':
    post:
      tags:
        - User Profile
      summary: Create OTP
      operationId: createOtp
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/OtpRef'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/users/{userName}/verifyOtp':
    post:
      tags:
        - User Profile
      summary: Verify OTP
      operationId: verifyOtp
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '409':
          description: OTP is not valid
        '410':
          description: OTP is no longer available
      security:
        - oAuth2:
            - write
  '/users/{mobileNo}/forgetUserName':
    post:
      tags:
        - User Profile
      summary: Forget userName
      operationId: forgetUserName
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: mobileNo
          in: path
          description: Mobile number
          required: true
          type: string
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/users/{userName}/forgetPassword':
    post:
      tags:
        - User Profile
      summary: Forget password
      operationId: forgetPassword
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: body
          in: body
          description: Forget password payload
          required: true
          schema:
            $ref: '#/definitions/ForgetPassword'
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/users/{userName}/forgetPincode':
    post:
      tags:
        - User Profile
      summary: Forget pincode
      operationId: forgetPincode
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: body
          in: body
          description: Forget pinCode payload
          required: true
          schema:
            $ref: '#/definitions/ForgetPinCode'
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/users/{userName}/resetPassword':
    post:
      tags:
        - User Profile
      summary: Reset password
      operationId: resetPassword
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/users/{userName}/resetPincode':
    post:
      tags:
        - User Profile
      summary: Reset pincode
      operationId: resetPincode
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/users/{userName}/changeProfileImage':
    post:
      tags:
        - User Profile
      summary: Chnage user profile image
      operationId: changeProfileImage
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: body
          in: body
          description: Change user profile image payload
          required: true
          schema:
            $ref: '#/definitions/ChangeProfileImage'
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid pincode policy
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: User not found
      security:
        - oAuth2:
            - write
  '/users/{userName}/files':
    post:
      tags:
        - User Profile
      summary: Upload user file
      operationId: uploadFile
      consumes:
        - multipart/form-data
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: file
          in: formData
          description: Image to upload
          required: true
          type: file
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/FileRef'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/users/{userName}/files/{fileName}':
    delete:
      tags:
        - User Profile
      summary: Delete user file
      operationId: deleteFile
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: userName
          in: path
          description: User name
          required: true
          type: string
        - name: fileName
          in: path
          description: File name
          required: true
          type: string
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - write
  '/permissions':
    get:
      tags:
        - Role Profile
      summary: Get permissions
      operationId: findPermissionList
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/Application'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Role not found
      security:
        - oAuth2:
            - read
  '/roles/{roleId}':
    get:
      tags:
        - Role Profile
      summary: Get role profile
      operationId: findRoleById
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: roleId
          in: path
          description: Role id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/Role'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Role not found
      security:
        - oAuth2:
            - read
  '/roles/list':
    get:
      tags:
        - Role Profile
      summary: Get role profile list
      operationId: findRoleByCriteria
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: searchCriteria
          in: query
          description: Search by role id, role name
          required: false
          type: string
        - name: page
          in: query
          description: Number of page (Default 0)
          required: false
          type: integer
        - name: size
          in: query
          description: Size per page (Default 20)
          required: false
          type: integer
        - name: sortOrder
          in: query
          description: asc or desc
          required: false
          type: string
        - name: sortBy
          in: query
          description: 'Field name eg. lastModifiedDate'
          required: false
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/RoleListDtoPagination'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - read
  '/roles':
    post:
      tags:
        - Role Profile
      summary: Create new role profile
      operationId: createRole
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: New role payload
          required: true
          schema:
            $ref: '#/definitions/Role'
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Role not found
      security:
        - oAuth2:
            - write  
  '/roles ':
    put:
      tags:
        - Role Profile
      summary: Update role profile
      operationId: updateRole
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Update role payload
          required: true
          schema:
            $ref: '#/definitions/Role'
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Role not found
      security:
        - oAuth2:
            - write
  '/roles/{roleId} ':
    delete:
      tags:
        - Role Profile
      summary: Delete role profile
      operationId: deleteRole
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: roleId
          in: path
          description: Role id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/Role'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Role not found
      security:
        - oAuth2:
            - write
  '/applications/{applicationId}':
    get:
      tags:
        - Application Profile
      summary: Get application profile
      operationId: findApplicationById
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: applicationId
          in: path
          description: Application id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/Application'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Application not found
      security:
        - oAuth2:
            - read
  '/applications':
    post:
      tags:
        - Application Profile
      summary: Create new application profile
      operationId: createApplication
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: New application payload
          required: true
          schema:
            $ref: '#/definitions/Application'
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Application not found
      security:
        - oAuth2:
            - write  
  '/applications ':
    put:
      tags:
        - Application Profile
      summary: Update application profile
      operationId: updateApplication
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: body
          in: body
          description: Update application payload
          required: true
          schema:
            $ref: '#/definitions/Application'
      responses:
        '200':
          description: successful operation
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Application not found
      security:
        - oAuth2:
            - write
  '/applications/{applicationId} ':
    delete:
      tags:
        - Application Profile
      summary: Delete application profile
      operationId: deleteApplication
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: applicationId
          in: path
          description: Application id
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/Application'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
        '404':
          description: Application not found
      security:
        - oAuth2:
            - write
  '/tasks':
    get:
      tags:
        - Tasks By Role
      summary: Get task by role
      operationId: findByCriteria
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: x-host
          in: header
          description: Custom host header as "identity.api.tdshop.io"
          required: true
          type: string
        - name: searchCriteria
          in: query
          description: >-
            Search criteria on "Request No." or "Request By"
          required: false
          type: string
        - name: module
          in: query
          description: >-
            Search module
          required: false
          type: string   
        - name: page
          in: path
          description: Page number
          required: true
          type: integer
        - name: size
          in: path
          description: number record per one page
          required: true
          type: integer   
        - name: sortBy
          in: path
          description: field name for sorting
          required: true
          type: string
        - name: sortOrder
          in: path
          description: sorting direction ('desc','asc')
          required: true
          type: string                         
      responses:
        '200':
          description: successful operation
          schema:
            $ref: '#/definitions/TaskListPagination'
        '401':
          description: |
            Not authorized, oAuth2 uses www-authenticate header to indicate error 
            Example: Bearer error="invalid_token", error_description="Jwt expired at 2019-02-12T12:00:04Z", error_uri="https://tools.ietf.org/html/rfc6750#section-3.1"
      security:
        - oAuth2:
            - read
securityDefinitions:
  oAuth2:
    type: oauth2
    flow: accessCode
    authorizationUrl: 'https://api.tdshop.io'
    tokenUrl: 'https://api.tdshop.io/auth/token'
    scopes:
      read: Grants read access
      write: Grants write access
definitions:
  UserCredential:
    type: object
    description: User credential
    properties:
      grant_type:
        type: string
        description: 'Authorization grant type (password, refresh_token)'
      username:
        type: string
        description: User name
      password:
        type: string
        description: User password
    required:
      - grant_type
      - username
      - password
  OAuthToken:
    type: object
    description: OAuth token
    properties:
      access_token:
        type: string
        description: Access token
      token_type:
        type: string
        description: Token type
      refresh_token:
        type: string
        description: Refresh token
      jti:
        type: string
        description: Unique identifier for the JWT
    required:
      - access_token
      - token_type
      - refresh_token
      - jti
  User:
    type: object
    description: User
    required:
      - userName
      - firstName
      - lastName
      - localFirstName
      - localLastName
      - countryCode
      - mobileNo
      - active
      - isDeleted
      - credentials
      
    properties:
      id:
        type: string
      version:
        type: integer
        format: int64
      userName:
        type: string
      userCode:
        type: string
      firstName:
        type: string
      lastName:
        type: string
      localFirstName:
        type: string
      localLastName:
        type: string
      countryCode:
        type: string
        example: "+66"
      mobileNo:
        type: string
      email:
        type: string
      gender:
        type: string
        enum:
        - male
        - female
      birthDate:
        type: string
        format: dd/MM/yyyy
      active:
        type: boolean
        default: true
      isDeleted:
        type: boolean
        default: false
      profileImageName:
        type: string
      credentials:
        $ref: '#/definitions/Credentials'
      applications:
        type: array
        items:
          type: string
      roles:
        type: array
        items:
          type: string
      tenant:
        $ref: '#/definitions/Tenant'
      createdDate:
        type: string
      createdBy:
        type: string
      lastModifiedDate:
        type: string
      lastModifiedBy:
        type: string
  UserList:
    type: object
    description: User list
    properties:
      id:
        type: string
      userName:
        type: string
      userCode:
        type: string
      firstName:
        type: string
      lastName:
        type: string
      active:
        type: boolean
        default: true
      roles:
        type: array
        items:
          type: string
      createdDate:
        type: string
      lastModifiedDate:
        type: string
      lastSuccessLoginDate:
        type: string
  Credentials:
    type: object
    description: Credentials
    properties:
      password:
        type: string
      otp:
        type: string
      pinCode:
        type: string
      accountNonLocked:
        type: boolean
        default: true
      accountNonExpired:
        type: boolean
        default: true
      forceChangePassword:
        type: boolean
        default: true
      forceChangePinCode:
        type: boolean
      loginFailedAttemps:
        type: integer
        default: 0
      accountLockedDate:
        type: string
        format: date-time
  Tenant:
    type: object
    description: Tenant
    properties:
      merchant:
        type: string
      sites:
        type: array
        items:
          type: string
      groups:
        type: array
        items:
          type: string
      stores:
        type: array
        items:
          type: string
  ChangePassword:
    type: object
    description: Change password
    properties:
      oldPassword:
        type: string
      newPassword:
        type: string
  ChangePincode:
    type: object
    description: Change pincode
    properties:
      oldPinCode:
        type: string
      newPinCode:
        type: string
  ForceChangePassword:
    type: object
    description: Force change password
    properties:
      newPassword:
        type: string
  ForgetPassword:
    type: object
    description: Forget password
    properties:
      newPassword:
        type: string
      otp:
        type: string
  ForgetPinCode:
    type: object
    description: Forget pinCode
    properties:
      newPinCode:
        type: string
      otp:
        type: string
  ForceChangePincode:
    type: object
    description: Force change pincode
    properties:
      newPinCode:
        type: string
  OtpRef:
    type: object
    description: 
    properties:
      userName:
        type: string
      refNo:
        type: string
  VerifyOtp:
    type: object
    description: 
    properties:
      otp:
        type: string
  ChangeProfileImage:
    type: object
    description: Change profile image
    properties:
      profileImageName:
        type: string
  Role:
    type: object
    description: Role
    properties:
      id:
        type: string
      version:
        type: integer
        format: int64
      name:
        type: string
      code:
        type: string
      permissions:
        type: array
        items:
          $ref: '#/definitions/Permission'
      createdDate:
        type: string
      createdBy:
        type: string
      lastModifiedDate:
        type: string
      lastModifiedBy:
        type: string
  Permission:
    type: object
    description: Permission
    properties:
      code:
        type: string
      name:
        type: string
      enabled:
        type: boolean
  Application:
    type: object
    description: Application
    properties:
      id:
        type: string
      version:
        type: integer
        format: int64
      name:
        type: string
      features:
        type: array
        items:
          $ref: '#/definitions/Feature'
      createdDate:
        type: string
      createdBy:
        type: string
      lastModifiedDate:
        type: string
      lastModifiedBy:
        type: string
  Feature:
    type: object
    description: Feature
    properties:
      code:
        type: string
      name:
        type: string
      permissions:
        type: array
        items:
          $ref: '#/definitions/Permission'
  Permission:
    type: object
    description: Feature
    properties:
      sortingNo:
        type: string
      code:
        type: string
      name:
        type: string
  UserListPagination:
    type: object
    description: Pagination object for User Profile
    allOf:
      - $ref: '#/definitions/Pagination'
      - type: object
        properties:
          content:
            type: array
            items:
              $ref: '#/definitions/UserList'
  Pagination:
    type: object
    description: Object with paging
    properties:
      page:
        type: integer
      size:
        type: integer
      totalElements:
        type: integer
      first:
        type: boolean
      numberOfElements:
        type: integer
      totalPages:
        type: integer
      hasContent:
        type: boolean
      last:
        type: boolean
      empty:
        type: boolean
  FileRef:
    type: object
    description: File reference
    properties:
      refId:
        type: string
      signedUrl:
        type: string
  TaskDto:
    type: object
    properties:
      id:
        type: string
      requestId:
        type: string
      requestNo:
        type: string
      docType:
        type: string
      requestStatus:
        type: string
      subject:
        type: string
      requester:
        type: string
      requesterName:
        type: string
      requestedDate:
        type: string
      requestInfo:
        type: object
      status:
        type: string
      createdDate:
        type: string
      lastModifiedDate:
        type: string
  DocumentType:
    type: string
    enum:
      - PRODUCT
      - PURCHASE_REQUEST
      - PROMOTION
  TaskListPagination:
    type: object
    description: Pagination object for Task
    allOf:
      - $ref: '#/definitions/Pagination'
      - type: object
        properties:
          content:
            type: array
            items:
              $ref: '#/definitions/TaskDto'
  RoleListDto:
    type: object
    properties:
      no:
        type: string
      name:
        type: string
      code:
        type: string
      isPredefined:
        type: boolean
      numOfUser:
        type: integer
      updatedBy:
        type: string
      lastUpdated:
        type: string
  RoleListDtoPagination:
    type: object
    description: Pagination object for Role List Dto
    allOf:
      - $ref: '#/definitions/Pagination'
      - type: object
        properties:
          content:
            type: array
            items:
              $ref: '#/definitions/RoleListDto'